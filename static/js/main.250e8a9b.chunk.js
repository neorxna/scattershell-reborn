(this.webpackJsonpshellscatter=this.webpackJsonpshellscatter||[]).push([[0],{103:function(e,t,n){},120:function(e,t,n){},122:function(e,t,n){"use strict";n.r(t);var c,a,r,l,i,o,u=n(0),s=n.n(u),d=n(25),b=n.n(d),f=(n(103),n(9)),j=n(3),O=n(24),h=n(46),p={harvfn:{id:"harvfn",name:"Harvfn",size:12,starting:!0},orthsar:{id:"orthsar",name:"Orthsar",size:2},ngeled:{id:"ngeled",name:"Ngeled",size:3}},v=Object.fromEntries(Object.entries(p).map((function(e){var t=Object(O.a)(e,2),n=t[0],c=t[1];return[n,Object(j.a)({},c)]}))),g=Object(h.b)({name:"island",initialState:{byId:v}}),y=g.reducer,m=(g.actions.confirmIsland,function(e){return function(t){return t.island.byId[e]}}),I=n(1),x="?",B="\ud83c\udf3f",_="\u2728",T="\u26fa",F="\ud83c\udf32",w="\ud83d\udc1f",C=" ",S="\u26f0\ufe0f",k=(c={},Object(I.a)(c,x,"undecided"),Object(I.a)(c,B,"food"),Object(I.a)(c,_,"materials"),Object(I.a)(c,T,"settlement"),Object(I.a)(c,F,"grass"),Object(I.a)(c,w,"lagoon"),Object(I.a)(c,C,"desert"),Object(I.a)(c,S,"mountain"),function(e){return e+Math.floor(e/2)}),A=n(63),W=n(52),E=n(88),R=n(69),M={Shellfish:"shellfish",Fish:"river fish",Pigs:"pigs",Birds:"birds",BushFood:"grubs",Coconuts:"coconuts",RootVegetables:"root vegetables",PreciousShells:"precious shells",FreshWater:"fresh water",Flax:"flax",Bamboo:"bamboo",SturdyWood:"sturdy wood",FruitTrees:"fruit trees",Guano:"guano"},G=(a={},Object(I.a)(a,M.Shellfish,!1),Object(I.a)(a,M.Fish,!1),Object(I.a)(a,M.Pigs,!1),Object(I.a)(a,M.Birds,!1),Object(I.a)(a,M.BushFood,!1),Object(I.a)(a,M.Coconuts,!1),Object(I.a)(a,M.RootVegetables,!0),Object(I.a)(a,M.PreciousShells,!1),Object(I.a)(a,M.FreshWater,!1),Object(I.a)(a,M.Flax,!1),Object(I.a)(a,M.Bamboo,!1),Object(I.a)(a,M.SturdyWood,!1),Object(I.a)(a,M.FruitTrees,!0),Object(I.a)(a,M.Guano,!1),r={},Object(I.a)(r,M.Shellfish,!1),Object(I.a)(r,M.Fish,!1),Object(I.a)(r,M.Pigs,!1),Object(I.a)(r,M.Birds,!1),Object(I.a)(r,M.BushFood,!1),Object(I.a)(r,M.Coconuts,!0),Object(I.a)(r,M.RootVegetables,!0),Object(I.a)(r,M.PreciousShells,!0),Object(I.a)(r,M.FreshWater,!1),Object(I.a)(r,M.Flax,!1),Object(I.a)(r,M.Bamboo,!1),Object(I.a)(r,M.SturdyWood,!0),Object(I.a)(r,M.FruitTrees,!1),Object(I.a)(r,M.Guano,!1),l={},Object(I.a)(l,M.Shellfish,!1),Object(I.a)(l,M.Fish,!1),Object(I.a)(l,M.Pigs,!0),Object(I.a)(l,M.Birds,!1),Object(I.a)(l,M.BushFood,!1),Object(I.a)(l,M.Coconuts,!0),Object(I.a)(l,M.RootVegetables,!0),Object(I.a)(l,M.PreciousShells,!1),Object(I.a)(l,M.FreshWater,!1),Object(I.a)(l,M.Flax,!1),Object(I.a)(l,M.Bamboo,!1),Object(I.a)(l,M.SturdyWood,!1),Object(I.a)(l,M.FruitTrees,!0),Object(I.a)(l,M.Guano,!0),i={},Object(I.a)(i,M.Shellfish,2),Object(I.a)(i,M.Fish,3),Object(I.a)(i,M.Pigs,2),Object(I.a)(i,M.Birds,1),Object(I.a)(i,M.BushFood,3),Object(I.a)(i,M.Coconuts,2),Object(I.a)(i,M.RootVegetables,1),Object(I.a)(i,M.PreciousShells,0),Object(I.a)(i,M.FreshWater,2),Object(I.a)(i,M.Flax,0),Object(I.a)(i,M.Bamboo,1),Object(I.a)(i,M.SturdyWood,0),Object(I.a)(i,M.FruitTrees,2),Object(I.a)(i,M.Guano,0),i),P=(o={},Object(I.a)(o,M.Shellfish,1),Object(I.a)(o,M.Fish,0),Object(I.a)(o,M.Pigs,1),Object(I.a)(o,M.Birds,1),Object(I.a)(o,M.BushFood,0),Object(I.a)(o,M.Coconuts,2),Object(I.a)(o,M.RootVegetables,0),Object(I.a)(o,M.PreciousShells,2),Object(I.a)(o,M.FreshWater,0),Object(I.a)(o,M.Flax,3),Object(I.a)(o,M.Bamboo,2),Object(I.a)(o,M.SturdyWood,2),Object(I.a)(o,M.FruitTrees,1),Object(I.a)(o,M.Guano,2),o),z=function(e){return e[Math.floor(Math.random()*e.length)]},L=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},U=Object.values(M).filter((function(e){return P[e]>0})),H=Object.values(M).filter((function(e){return G[e]>0})),V=Object.values(M),D=function(e,t){return{cellType:e,contains:e===_?[z(U),z(U)]:e===B?[z(H),z(H)]:e===C?[z([M.BushFood,M.Coconuts,null,null,null])].filter((function(e){return null!==e})):e===w?[z([M.FreshWater,null]),z([M.Fish,null])].filter((function(e){return null!==e})):e===S?[z([M.FreshWater,M.Birds,M.Bamboo,null])].filter((function(e){return null!==e})):[z(V)]}},K=Object(h.b)({name:"cell",initialState:{byId:{},activatableByIslandId:{},deactivatableByIslandId:{},activatedByIslandId:{},harbourByIslandId:{}},reducers:{resetIsland:function(e,t){var n=t.payload.islandId;e.activatableByIslandId[n]=[],e.deactivatableByIslandId[n]=[],e.activatedByIslandId[n]=[],e.harbourByIslandId[n]=[]},generateGrid:function(e,t){var n=t.payload.islandId,c=p[n].size,a=function(e){for(var t={cellType:x},n=function(t,n){return n*e+t},c=Array(e*e).fill(Object(j.a)({},t)).map((function(e,t){return Object(j.a)(Object(j.a)({},e),{},{pos:t})})),a=function(e,t){var n=function(e){return e-t},c=function(e){return e+t},a=function(e){return e%t===0?void 0:e-1},r=function(e){return e%t===t-1?void 0:e+1};return{up:function(t){return e[n(t)]},down:function(t){return e[c(t)]},left:function(t){return e[a(t)]},right:function(t){return e[r(t)]},upright:function(t){return e[n(r(t))]},downleft:function(t){return e[c(a(t))]},upleft:function(t){return e[n(a(t))]},downright:function(t){return e[c(r(t))]}}}(c,e),r=a.up,l=a.down,i=a.left,o=a.right,u=a.upleft,s=a.upright,d=a.downleft,b=a.downright,f=0;f<e/4;f++){var O=L(0,e-1),h=L(0,e-1),p=c[n(O,h)];c[n(O,h)]=Object(j.a)(Object(j.a)({},p),{},{cellType:T})}var v=z(c.filter((function(e){return e.cellType===T}))).pos,g=[r(v),l(v),i(v),o(v)].filter((function(e){return void 0!=e&&e.cellType===x})),y=z(g);c[y.pos]=Object(j.a)(Object(j.a)({},y),D(B));var m=function(t){for(var n,a=[c[v]],u=function(){var e=a[a.length-1],t=[r,l,i,o].map((function(t){return t(e.pos)})).filter((function(e){return e&&(a.length>3?e.cellType===x:e.cellType!==T&&e.cellType!==B)&&0===a.filter((function(t){return t.pos===e.pos})).length})),n=z(t);if(!n)return"break";a.push(n)};a.length<e&&"break"!==u(););return n=a.pop(),c[n.pos]=Object(j.a)(Object(j.a)({},n),t([r,l,i,o].map((function(e){return e(n.pos)})))),[].concat(a,[n])};return m((function(e){return D(_)})),e>5&&m((function(e){return D(S)})),new R([e,e],e/1.5).fill().map((function(e){return n(Math.round(e[0]),Math.round(e[1]))})).forEach((function(e){if(c[e]&&c[e].cellType===x){var t,n=[r,l,i,o].concat(Object(A.a)(z([[s,d],[b,u]]))).map((function(t){return t(e)})),a=0,f=Object(E.a)(n);try{for(f.s();!(t=f.n()).done;){var O=t.value;O&&O.cellType===x&&(c[O.pos]=Object(j.a)(Object(j.a)({},c[O.pos]),D(C)),a+=1)}}catch(h){f.e(h)}finally{f.f()}c[e]=Object(j.a)(Object(j.a)({},c[e]),D(6===a?w:C))}})),new R([e,e],e/4).fill().map((function(e){return n(Math.round(e[0]),Math.round(e[1]))})).forEach((function(e){var t=0===[i,o,r,l].map((function(t){return t(e)})).filter((function(e){return void 0==e||e.cellType===S})).length;if(c[e]&&c[e].cellType===x&&t){c[e]=Object(j.a)(Object(j.a)({},c[e]),D(S));for(var n=[s(e),d(e)],a=function(){var e=b[u];e&&e.cellType===x&&0===[r,l,i,o].map((function(t){return t(e.pos)})).filter((function(e){return void 0==e||e.cellType===S})).length&&(c[e.pos]=Object(j.a)(Object(j.a)({},c[e.pos]),D(S)))},u=0,b=n;u<b.length;u++)a()}})),new R([e,e],e/12).fill().map((function(e){return n(Math.round(e[0]),Math.round(e[1]))})).forEach((function(e){c[e]&&c[e].cellType===x&&(c[e]=Object(j.a)(Object(j.a)({},c[e]),D(F)))})),c.forEach((function(e){e.cellType===x&&(c[e.pos]=Object(j.a)(Object(j.a)({},e),D(z([B,B,_,C,C,w]))))})),c}(c);e.activatableByIslandId[n]=[],e.deactivatableByIslandId[n]=[],e.activatedByIslandId[n]=[],e.harbourByIslandId[n]=[],a.forEach((function(t){var a=t.pos%c,r=Math.floor(t.pos/c),l="".concat(n,":").concat(r,"_").concat(a),i={};a>0&&(i.n="".concat(n,":").concat(r,"_").concat(a-1)),a<c-1&&(i.s="".concat(n,":").concat(r,"_").concat(a+1)),r>0&&(i.w="".concat(n,":").concat(r-1,"_").concat(a)),r<c-1&&(i.e="".concat(n,":").concat(r+1,"_").concat(a)),e.byId[l]=Object(j.a)(Object(j.a)({},t),{},{id:l,row:r,col:a,islandId:n,neighbours:i})}))},toggleActivated:function(e,t){var n=t.payload.cellId,c=n.split(":")[0],a=function(){return e.activatedByIslandId[c]},r=function(){return e.activatableByIslandId[c]},l=function(){return-1!==a().indexOf(n)},i=function(){return Object.entries(e.byId[n].neighbours).map((function(e){var t=Object(O.a)(e,2);t[0];return t[1]}))};if(l()&&-1!==e.deactivatableByIslandId[c].indexOf(n)){var o=a().filter((function(e){return e!==n}));e.activatedByIslandId[c]=o,-1===r().indexOf(n)&&0!==a().length&&e.activatableByIslandId[c].push(n),i().forEach((function(t){0===Object.entries(e.byId[t].neighbours).map((function(e){var t=Object(O.a)(e,2);t[0];return t[1]})).filter((function(e){return-1!==a().indexOf(e)})).length&&(e.activatableByIslandId[c]=r().filter((function(e){return e!==t})))}))}else!l()&&(-1!==r().indexOf(n)||0===r().length)&&a().length<k(p[c].size)&&(e.activatedByIslandId[c].push(n),e.activatableByIslandId[c]=r().filter((function(e){return e!==n})),i().forEach((function(t){-1===r().indexOf(t)&&-1===a().indexOf(t)&&e.activatableByIslandId[c].push(t)})));var u=[];a().forEach((function(t){var n=[],c={},r=null,l=!1,i=a().filter((function(e){return e!==t}));if(0===i.length)l=!0;else{for(n.push(i[0]);n.length>0;)r=n.shift(),c[r]||(c[r]=!0,Object.entries(e.byId[r].neighbours).filter((function(e){var t=Object(O.a)(e,2),n=(t[0],t[1]);return-1!==i.indexOf(n)})).forEach((function(e){var t=Object(O.a)(e,2),c=(t[0],t[1]);n.push(c)})));var o=i.filter((function(e){return void 0==c[e]}));0===o.length&&(l=!0)}l&&u.push(t)})),e.deactivatableByIslandId[c]=u,e.harbourByIslandId[c]=r().filter((function(t){return Object.entries(e.byId[t].neighbours).map((function(e){var t=Object(O.a)(e,2);t[0];return t[1]})).reduce((function(e,t){return e+(-1===a().indexOf(t)?0:1)}),0)>1}))}}}),N=K.actions,J=N.generateGrid,Y=N.toggleActivated,Q=(N.yieldResource,N.resetIsland,function(e){return e.cell.byId}),Z=function(e){return function(t){return t.cell.activatedByIslandId[e]||[]}},$=function(e){return function(t){return t.cell.harbourByIslandId[e]||[]}},q=function(e){return Object(W.a)([Z(e)],(function(t){return k(p[e].size)-t.length}))},X=K.reducer,ee=n(21),te=n.n(ee),ne=(n(109),n(135)),ce=n(4),ae={display:"flex",alignItems:"center",justifyContent:"center",margin:"0px",width:"30px",height:"30px",fontSize:"1.4em"};function re(e){var t=e.showAsLink,n=e.cellActivated,c=e.canActivate,a=e.allActivated,r=e.isHarbour,l=e.cell,i=e.onCellClick,o=e.isOcean,u=e.noneActivated,s=e.isTopLeft,d=e.isTopRight,b=e.isBottomLeft,f=e.isBottomRight,O=te.a.cell+" ".concat(n?te.a.cellActivated:te.a.cellUnactivated)+(t?"":" ".concat(te.a.cellBlocked))+(n||c||u?"":" ".concat(te.a.cellUnactivatable))+(l.cellType===T?" ".concat(te.a.cellSettlement):"")+(c?" ".concat(te.a.cellCanActivate):"")+(r?" ".concat(te.a.cellHarbour):"")+(o?" ".concat(te.a.cellOcean):"")+(u?" ".concat(te.a.noneActivated):"");return Object(ce.jsx)(ne.a.Column,{onClick:function(){return i(l)},disabled:!t,className:O,style:Object(j.a)({transition:"opacity 1s",borderTopLeftRadius:s?"0.28rem":"0px",borderTopRightRadius:d?"0.28rem":"0px",borderBottomLeftRadius:b?"0.28rem":"0px",borderBottomRightRadius:f?"0.28rem":"0px"},ae),children:(c&&!a||r||n||u&&l.cellType===T)&&Object(ce.jsx)("span",{style:{opacity:o?"0":n||u?"1":r&&a?"0":"0.5"},children:l.cellType})},l.id)}function le(e){var t=e.islandId,n=Object(f.b)(),c=Object(f.c)(function(e){return Object(W.a)([Q],(function(t){var n=p[e].size,c=Object(A.a)(Array(n).keys());if(void 0!==t["".concat(e,":0_0")])return c.map((function(n){return c.map((function(c){return t["".concat(e,":").concat(n,"_").concat(c)]}))}))}))}(t)),a=Object(f.c)(Z(t)),r=Object(f.c)(function(e){return function(t){return t.cell.activatableByIslandId[e]||[]}}(t)),l=Object(f.c)(function(e){return function(t){return t.cell.deactivatableByIslandId[e]||[]}}(t)),i=Object(f.c)($(t)),o=Object(f.c)(m(t)),s=Object(f.c)(q(t)),d=0===s,b=s===k(o.size),j=function(e){n(Y({islandId:t,cellId:e.id}))};return c?Object(ce.jsx)("div",{style:{display:"flex",padding:"0px",flexDirection:"column",flexWrap:"nowrap"},children:c.map((function(e,t){return Object(ce.jsx)("div",{style:{display:"flex",padding:"0px",flexWrap:"nowrap"},children:e.map((function(n,f){var O=-1!==a.indexOf(n.id),h=s>0,p=-1!==r.indexOf(n.id),v=-1!==l.indexOf(n.id),g=-1!==i.indexOf(n.id),y=d&&!g&&!O,m=o.confirmed&&!y&&!g||O&&v||h&&p||b,I=0===t&&0===f,x=0===t&&f===e.length-1,B=t===c.length-1&&0===f,_=t===c.length-1&&f===e.length-1;return Object(u.createElement)(re,{cell:n,cellActivated:O,canActivate:p,showAsLink:m,onCellClick:j,isHarbour:g,isOcean:y,allActivated:d,noneActivated:b,isTopLeft:I,isTopRight:x,isBottomLeft:B,isBottomRight:_,key:n.id})}))},t)}))}):Object(ce.jsx)(ce.Fragment,{})}function ie(e){var t=e.islandId,n=Object(f.b)();return Object(u.useEffect)((function(){n(J({islandId:t}))}),[]),Object(ce.jsx)(le,{islandId:t})}var oe=n(134),ue=n(136),se=n(89),de=["id","cellType"];function be(e){var t,n=[],c=[],a={},r=Object(f.c)(m(e)),l=r.id,i=r.size,o=Object(f.c)((t=l,function(e){return Object.values(e.cell.byId).filter((function(e){return e.islandId===t}))})),u=Object(f.c)(Z(e)),s=Object(f.c)($(e)),d=function(e){return Object.values(e.neighbours).filter((function(e){return u.includes(e)}))},b=o.filter((function(e){var t=e.id,n=e.cellType;return u.includes(t)&&n===T})).length>0;o.filter((function(e){var t=e.id,n=e.cellType,c=Object(se.a)(e,de);return!(!u.includes(t)||n!==w)&&4===d(c).length})).length;if(b?b&&c.push("\u2714 settlement"):c.push("need settlement (".concat(T,")")),i>2){var j=o.filter((function(e){var t=e.id,n=e.cellType;return u.includes(t)&&n===T}));j.length>0&&j.filter((function(e){return d(e).length>1})).length===j.length?c.push("\u2714 two neighbours per settlement"):j.length>0&&c.push("settlements need two neighbours")}if(i>=8){var h=o.filter((function(e){var t=e.id,n=e.cellType;return u.includes(t)&&n===S})).length>0;h?c.push("\ufe0f\u2714 mountain"):c.push("need one mountain (".concat(S,")"))}o.forEach((function(e){var t=e.id,n=e.contains;u.includes(t)&&n&&n.length>0&&n.forEach((function(e){return a[e]=a[e]?a[e]+1:1}))}));var p=o.filter((function(e){var t=e.id;return s.includes(t)})).length;p>0&&n.push("".concat(p," fishing harbour").concat(p>1?"s":""));for(var v=0,g=Object.entries(a);v<g.length;v++){var y=Object(O.a)(g[v],2),I=y[0],x=y[1];n.push("".concat(I," ").concat(x>1?"x".concat(x):""))}return{messages:c,notes:n}}var fe=n(75),je={segmentGroup:{backgroundColor:"white",maxWidth:"420px"}};function Oe(e){var t=e.islandId,n=be(t),c=n.messages,a=n.notes,r=Object(f.c)(q(t)),l=Object(ce.jsx)(oe.a.Group,{size:fe.isMobile?"small":"large",children:c.map((function(e){return Object(u.createElement)(oe.a,Object(j.a)(Object(j.a)({},e.includes("need ")?{color:"violet"}:{color:"green"}),{},{key:e}),e)}))}),i=Object(ce.jsx)(oe.a.Group,{size:fe.isMobile?"tiny":"small",children:a.map((function(e){return Object(u.createElement)(oe.a,Object(j.a)(Object(j.a)({},e.includes("fishing")?{color:"teal"}:{}),{},{key:e}),e)}))});return Object(ce.jsxs)(ue.a.Group,{raised:!0,className:"messages",style:je.segmentGroup,children:[Object(ce.jsx)(ue.a,{basic:!0,attached:!0,children:l}),Object(ce.jsxs)(ue.a,{basic:!0,attached:!0,children:[i,0===r?Object(ce.jsx)("strong",{children:"island complete!"}):Object(ce.jsxs)(ce.Fragment,{children:[Object(ce.jsx)("strong",{children:r})," tiles remaining"]})]})]})}n(120);var he=function(){var e="harvfn";return Object(ce.jsx)("div",{style:{width:"100%",height:"100%",padding:"1em"},children:Object(ce.jsxs)(ne.a,{columns:2,stackable:!0,children:[Object(ce.jsx)(ne.a.Column,{style:{display:"flex",justifyContent:"center"},children:Object(ce.jsx)(ie,{islandId:e})}),Object(ce.jsx)(ne.a.Column,{style:{display:"flex",justifyContent:"center"},children:Object(ce.jsx)(Oe,{islandId:e})})]})})},pe=Object(h.a)({reducer:{island:y,cell:X}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(121);b.a.render(Object(ce.jsx)(s.a.StrictMode,{children:Object(ce.jsx)(f.a,{store:pe,children:Object(ce.jsx)(he,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},21:function(e,t,n){e.exports={cell:"Cell_cell__2Yo1b",cellHarbour:"Cell_cellHarbour__2vnwc",cellBlocked:"Cell_cellBlocked__1bBYG",cellOcean:"Cell_cellOcean__1y8HT",cellActivated:"Cell_cellActivated__3UQme",cellUnactivated:"Cell_cellUnactivated__3sbS-",cellDim:"Cell_cellDim__2ue1M",cellUnactivatable:"Cell_cellUnactivatable__b31ur",cellSettlement:"Cell_cellSettlement__1tZKK",cellSpan:"Cell_cellSpan__3xKvP",noneActivated:"Cell_noneActivated__2DkU5"}}},[[122,1,2]]]);
//# sourceMappingURL=main.250e8a9b.chunk.js.map