(this.webpackJsonpshellscatter=this.webpackJsonpshellscatter||[]).push([[0],{103:function(e,t,n){},120:function(e,t,n){},122:function(e,t,n){"use strict";n.r(t);var c,a,r,i,l,o,u=n(0),s=n.n(u),d=n(25),b=n.n(d),f=(n(103),n(9)),j=n(3),h=n(24),O=n(46),p={harvfn:{id:"harvfn",name:"Harvfn",size:12,starting:!0},orthsar:{id:"orthsar",name:"Orthsar",size:2},ngeled:{id:"ngeled",name:"Ngeled",size:3}},v=Object.fromEntries(Object.entries(p).map((function(e){var t=Object(h.a)(e,2),n=t[0],c=t[1];return[n,Object(j.a)({},c)]}))),g=Object(O.b)({name:"island",initialState:{byId:v}}),y=g.reducer,m=(g.actions.confirmIsland,function(e){return function(t){return t.island.byId[e]}}),I=n(135),B=n(1),x="?",_="\ud83c\udf3f",T="\u2728",F="\u26fa",w="\ud83c\udf32",C="\ud83d\udc1f",S=" ",A="\u26f0\ufe0f",k=(c={},Object(B.a)(c,x,"undecided"),Object(B.a)(c,_,"food"),Object(B.a)(c,T,"materials"),Object(B.a)(c,F,"settlement"),Object(B.a)(c,w,"grass"),Object(B.a)(c,C,"lagoon"),Object(B.a)(c,S,"desert"),Object(B.a)(c,A,"mountain"),function(e){return e+Math.floor(e/2)}),R=n(63),E=n(52),W=n(88),G=n(69),M={Shellfish:"shellfish",Fish:"river fish",Pigs:"pigs",Birds:"birds",BushFood:"grubs",Coconuts:"coconuts",RootVegetables:"root vegetables",PreciousShells:"precious shells",FreshWater:"fresh water",Flax:"flax",Bamboo:"bamboo",SturdyWood:"sturdy wood",FruitTrees:"fruit trees",Guano:"guano"},P=(a={},Object(B.a)(a,M.Shellfish,!1),Object(B.a)(a,M.Fish,!1),Object(B.a)(a,M.Pigs,!1),Object(B.a)(a,M.Birds,!1),Object(B.a)(a,M.BushFood,!1),Object(B.a)(a,M.Coconuts,!1),Object(B.a)(a,M.RootVegetables,!0),Object(B.a)(a,M.PreciousShells,!1),Object(B.a)(a,M.FreshWater,!1),Object(B.a)(a,M.Flax,!1),Object(B.a)(a,M.Bamboo,!1),Object(B.a)(a,M.SturdyWood,!1),Object(B.a)(a,M.FruitTrees,!0),Object(B.a)(a,M.Guano,!1),r={},Object(B.a)(r,M.Shellfish,!1),Object(B.a)(r,M.Fish,!1),Object(B.a)(r,M.Pigs,!1),Object(B.a)(r,M.Birds,!1),Object(B.a)(r,M.BushFood,!1),Object(B.a)(r,M.Coconuts,!0),Object(B.a)(r,M.RootVegetables,!0),Object(B.a)(r,M.PreciousShells,!0),Object(B.a)(r,M.FreshWater,!1),Object(B.a)(r,M.Flax,!1),Object(B.a)(r,M.Bamboo,!1),Object(B.a)(r,M.SturdyWood,!0),Object(B.a)(r,M.FruitTrees,!1),Object(B.a)(r,M.Guano,!1),i={},Object(B.a)(i,M.Shellfish,!1),Object(B.a)(i,M.Fish,!1),Object(B.a)(i,M.Pigs,!0),Object(B.a)(i,M.Birds,!1),Object(B.a)(i,M.BushFood,!1),Object(B.a)(i,M.Coconuts,!0),Object(B.a)(i,M.RootVegetables,!0),Object(B.a)(i,M.PreciousShells,!1),Object(B.a)(i,M.FreshWater,!1),Object(B.a)(i,M.Flax,!1),Object(B.a)(i,M.Bamboo,!1),Object(B.a)(i,M.SturdyWood,!1),Object(B.a)(i,M.FruitTrees,!0),Object(B.a)(i,M.Guano,!0),l={},Object(B.a)(l,M.Shellfish,2),Object(B.a)(l,M.Fish,3),Object(B.a)(l,M.Pigs,2),Object(B.a)(l,M.Birds,1),Object(B.a)(l,M.BushFood,3),Object(B.a)(l,M.Coconuts,2),Object(B.a)(l,M.RootVegetables,1),Object(B.a)(l,M.PreciousShells,0),Object(B.a)(l,M.FreshWater,2),Object(B.a)(l,M.Flax,0),Object(B.a)(l,M.Bamboo,1),Object(B.a)(l,M.SturdyWood,0),Object(B.a)(l,M.FruitTrees,2),Object(B.a)(l,M.Guano,0),l),z=(o={},Object(B.a)(o,M.Shellfish,1),Object(B.a)(o,M.Fish,0),Object(B.a)(o,M.Pigs,1),Object(B.a)(o,M.Birds,1),Object(B.a)(o,M.BushFood,0),Object(B.a)(o,M.Coconuts,2),Object(B.a)(o,M.RootVegetables,0),Object(B.a)(o,M.PreciousShells,2),Object(B.a)(o,M.FreshWater,0),Object(B.a)(o,M.Flax,3),Object(B.a)(o,M.Bamboo,2),Object(B.a)(o,M.SturdyWood,2),Object(B.a)(o,M.FruitTrees,1),Object(B.a)(o,M.Guano,2),o),L=function(e){return e[Math.floor(Math.random()*e.length)]},U=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},H=Object.values(M).filter((function(e){return z[e]>0})),V=Object.values(M).filter((function(e){return P[e]>0})),D=Object.values(M),K=function(e,t){return{cellType:e,contains:e===T?[L(H),L(H)]:e===_?[L(V),L(V)]:e===S?[L([M.BushFood,M.Coconuts,null,null,null])].filter((function(e){return null!==e})):e===C?[L([M.FreshWater,null]),L([M.Fish,null])].filter((function(e){return null!==e})):e===A?[L([M.FreshWater,M.Birds,M.Bamboo,null])].filter((function(e){return null!==e})):[L(D)]}},N=Object(O.b)({name:"cell",initialState:{byId:{},activatableByIslandId:{},deactivatableByIslandId:{},activatedByIslandId:{},harbourByIslandId:{}},reducers:{resetIsland:function(e,t){var n=t.payload.islandId;e.activatableByIslandId[n]=[],e.deactivatableByIslandId[n]=[],e.activatedByIslandId[n]=[],e.harbourByIslandId[n]=[]},generateGrid:function(e,t){var n=t.payload.islandId,c=p[n].size,a=function(e){for(var t={cellType:x},n=function(t,n){return n*e+t},c=Array(e*e).fill(Object(j.a)({},t)).map((function(e,t){return Object(j.a)(Object(j.a)({},e),{},{pos:t})})),a=function(e,t){var n=function(e){return e-t},c=function(e){return e+t},a=function(e){return e%t===0?void 0:e-1},r=function(e){return e%t===t-1?void 0:e+1};return{up:function(t){return e[n(t)]},down:function(t){return e[c(t)]},left:function(t){return e[a(t)]},right:function(t){return e[r(t)]},upright:function(t){return e[n(r(t))]},downleft:function(t){return e[c(a(t))]},upleft:function(t){return e[n(a(t))]},downright:function(t){return e[c(r(t))]}}}(c,e),r=a.up,i=a.down,l=a.left,o=a.right,u=a.upleft,s=a.upright,d=a.downleft,b=a.downright,f=0;f<e/4;f++){var h=U(0,e-1),O=U(0,e-1),p=c[n(h,O)];c[n(h,O)]=Object(j.a)(Object(j.a)({},p),{},{cellType:F})}var v=L(c.filter((function(e){return e.cellType===F}))).pos,g=[r(v),i(v),l(v),o(v)].filter((function(e){return void 0!=e&&e.cellType===x})),y=L(g);c[y.pos]=Object(j.a)(Object(j.a)({},y),K(_));var m=function(t){for(var n,a=[c[v]],u=function(){var e=a[a.length-1],t=[r,i,l,o].map((function(t){return t(e.pos)})).filter((function(e){return e&&(a.length>3?e.cellType===x:e.cellType!==F&&e.cellType!==_)&&0===a.filter((function(t){return t.pos===e.pos})).length})),n=L(t);if(!n)return"break";a.push(n)};a.length<e&&"break"!==u(););return n=a.pop(),c[n.pos]=Object(j.a)(Object(j.a)({},n),t([r,i,l,o].map((function(e){return e(n.pos)})))),[].concat(a,[n])};return m((function(e){return K(T)})),e>5&&m((function(e){return K(A)})),new G([e,e],e/1.5).fill().map((function(e){return n(Math.round(e[0]),Math.round(e[1]))})).forEach((function(e){if(c[e]&&c[e].cellType===x){var t,n=[r,i,l,o].concat(Object(R.a)(L([[s,d],[b,u]]))).map((function(t){return t(e)})),a=0,f=Object(W.a)(n);try{for(f.s();!(t=f.n()).done;){var h=t.value;h&&h.cellType===x&&(c[h.pos]=Object(j.a)(Object(j.a)({},c[h.pos]),K(S)),a+=1)}}catch(O){f.e(O)}finally{f.f()}c[e]=Object(j.a)(Object(j.a)({},c[e]),K(6===a?C:S))}})),new G([e,e],e/4).fill().map((function(e){return n(Math.round(e[0]),Math.round(e[1]))})).forEach((function(e){var t=0===[l,o,r,i].map((function(t){return t(e)})).filter((function(e){return void 0==e||e.cellType===A})).length;if(c[e]&&c[e].cellType===x&&t){c[e]=Object(j.a)(Object(j.a)({},c[e]),K(A));for(var n=[s(e),d(e)],a=function(){var e=b[u];e&&e.cellType===x&&0===[r,i,l,o].map((function(t){return t(e.pos)})).filter((function(e){return void 0==e||e.cellType===A})).length&&(c[e.pos]=Object(j.a)(Object(j.a)({},c[e.pos]),K(A)))},u=0,b=n;u<b.length;u++)a()}})),new G([e,e],e/12).fill().map((function(e){return n(Math.round(e[0]),Math.round(e[1]))})).forEach((function(e){c[e]&&c[e].cellType===x&&(c[e]=Object(j.a)(Object(j.a)({},c[e]),K(w)))})),c.forEach((function(e){e.cellType===x&&(c[e.pos]=Object(j.a)(Object(j.a)({},e),K(L([_,_,T,S,S,C]))))})),c}(c);e.activatableByIslandId[n]=[],e.deactivatableByIslandId[n]=[],e.activatedByIslandId[n]=[],e.harbourByIslandId[n]=[],a.forEach((function(t){var a=t.pos%c,r=Math.floor(t.pos/c),i="".concat(n,":").concat(r,"_").concat(a),l={};a>0&&(l.n="".concat(n,":").concat(r,"_").concat(a-1)),a<c-1&&(l.s="".concat(n,":").concat(r,"_").concat(a+1)),r>0&&(l.w="".concat(n,":").concat(r-1,"_").concat(a)),r<c-1&&(l.e="".concat(n,":").concat(r+1,"_").concat(a)),e.byId[i]=Object(j.a)(Object(j.a)({},t),{},{id:i,row:r,col:a,islandId:n,neighbours:l})}))},toggleActivated:function(e,t){var n=t.payload.cellId,c=n.split(":")[0],a=function(){return e.activatedByIslandId[c]},r=function(){return e.activatableByIslandId[c]},i=function(){return-1!==a().indexOf(n)},l=function(){return Object.entries(e.byId[n].neighbours).map((function(e){var t=Object(h.a)(e,2);t[0];return t[1]}))};if(i()&&-1!==e.deactivatableByIslandId[c].indexOf(n)){var o=a().filter((function(e){return e!==n}));e.activatedByIslandId[c]=o,-1===r().indexOf(n)&&0!==a().length&&e.activatableByIslandId[c].push(n),l().forEach((function(t){0===Object.entries(e.byId[t].neighbours).map((function(e){var t=Object(h.a)(e,2);t[0];return t[1]})).filter((function(e){return-1!==a().indexOf(e)})).length&&(e.activatableByIslandId[c]=r().filter((function(e){return e!==t})))}))}else!i()&&(-1!==r().indexOf(n)||0===r().length)&&a().length<k(p[c].size)&&(e.activatedByIslandId[c].push(n),e.activatableByIslandId[c]=r().filter((function(e){return e!==n})),l().forEach((function(t){-1===r().indexOf(t)&&-1===a().indexOf(t)&&e.activatableByIslandId[c].push(t)})));var u=[];a().forEach((function(t){var n=[],c={},r=null,i=!1,l=a().filter((function(e){return e!==t}));if(0===l.length)i=!0;else{for(n.push(l[0]);n.length>0;)r=n.shift(),c[r]||(c[r]=!0,Object.entries(e.byId[r].neighbours).filter((function(e){var t=Object(h.a)(e,2),n=(t[0],t[1]);return-1!==l.indexOf(n)})).forEach((function(e){var t=Object(h.a)(e,2),c=(t[0],t[1]);n.push(c)})));var o=l.filter((function(e){return void 0==c[e]}));0===o.length&&(i=!0)}i&&u.push(t)})),e.deactivatableByIslandId[c]=u,e.harbourByIslandId[c]=r().filter((function(t){return Object.entries(e.byId[t].neighbours).map((function(e){var t=Object(h.a)(e,2);t[0];return t[1]})).reduce((function(e,t){return e+(-1===a().indexOf(t)?0:1)}),0)>1}))}}}),J=N.actions,Y=J.generateGrid,Q=J.toggleActivated,Z=(J.yieldResource,J.resetIsland,function(e){return e.cell.byId}),$=function(e){return function(t){return t.cell.activatedByIslandId[e]||[]}},q=function(e){return function(t){return t.cell.harbourByIslandId[e]||[]}},X=function(e){return Object(E.a)([$(e)],(function(t){return k(p[e].size)-t.length}))},ee=N.reducer,te=n(21),ne=n.n(te),ce=(n(109),n(4)),ae={display:"flex",alignItems:"center",justifyContent:"center",margin:"0px",width:"30px",height:"30px",fontSize:"1.4em"};function re(e){var t=e.showAsLink,n=e.cellActivated,c=e.canActivate,a=e.allActivated,r=e.isHarbour,i=e.cell,l=e.onCellClick,o=e.isOcean,u=e.noneActivated,s=e.isTopLeft,d=e.isTopRight,b=e.isBottomLeft,f=e.isBottomRight,h=ne.a.cell+" ".concat(n?ne.a.cellActivated:ne.a.cellUnactivated)+(t?"":" ".concat(ne.a.cellBlocked))+(n||c||u?"":" ".concat(ne.a.cellUnactivatable))+(i.cellType===F?" ".concat(ne.a.cellSettlement):"")+(c?" ".concat(ne.a.cellCanActivate):"")+(r?" ".concat(ne.a.cellHarbour):"")+(o?" ".concat(ne.a.cellOcean):"")+(u?" ".concat(ne.a.noneActivated):"");return Object(ce.jsx)(I.a.Column,{onClick:function(){return l(i)},disabled:!t,className:h,style:Object(j.a)({transition:"opacity 1s",borderTopLeftRadius:s?"20%":"0px",borderTopRightRadius:d?"20%":"0px",borderBottomLeftRadius:b?"20%":"0px",borderBottomRightRadius:f?"20%":"0px"},ae),children:(c&&!a||r||n||u&&i.cellType===F)&&Object(ce.jsx)("span",{style:{opacity:o?"0":n||u?"1":r&&a?"0":"0.5"},children:i.cellType})},i.id)}function ie(e){var t=e.islandId,n=Object(f.b)(),c=Object(f.c)(function(e){return Object(E.a)([Z],(function(t){var n=p[e].size,c=Object(R.a)(Array(n).keys());if(void 0!==t["".concat(e,":0_0")])return c.map((function(n){return c.map((function(c){return t["".concat(e,":").concat(n,"_").concat(c)]}))}))}))}(t)),a=Object(f.c)($(t)),r=Object(f.c)(function(e){return function(t){return t.cell.activatableByIslandId[e]||[]}}(t)),i=Object(f.c)(function(e){return function(t){return t.cell.deactivatableByIslandId[e]||[]}}(t)),l=Object(f.c)(q(t)),o=Object(f.c)(m(t)),s=Object(f.c)(X(t)),d=0===s,b=s===k(o.size),j=function(e){n(Q({islandId:t,cellId:e.id}))};return c?Object(ce.jsx)(I.a,{columns:c[0].length,style:{},children:c.map((function(e,t){return Object(ce.jsx)(I.a.Row,{style:{padding:"0px",flexWrap:"nowrap"},children:e.map((function(n,f){var h=-1!==a.indexOf(n.id),O=s>0,p=-1!==r.indexOf(n.id),v=-1!==i.indexOf(n.id),g=-1!==l.indexOf(n.id),y=d&&!g&&!h,m=o.confirmed&&!y&&!g||h&&v||O&&p||b,I=0===t&&0===f,B=0===t&&f===e.length-1,x=t===c.length-1&&0===f,_=t===c.length-1&&f===e.length-1;return Object(u.createElement)(re,{cell:n,cellActivated:h,canActivate:p,showAsLink:m,onCellClick:j,isHarbour:g,isOcean:y,allActivated:d,noneActivated:b,isTopLeft:I,isTopRight:B,isBottomLeft:x,isBottomRight:_,key:n.id})}))},t)}))}):Object(ce.jsx)(ce.Fragment,{})}function le(e){var t=e.islandId,n=Object(f.b)();return Object(u.useEffect)((function(){n(Y({islandId:t}))}),[]),Object(ce.jsx)(ie,{islandId:t})}var oe=n(134),ue=n(136),se=n(89),de=["id","cellType"];function be(e){var t,n=[],c=[],a={},r=Object(f.c)(m(e)),i=r.id,l=r.size,o=Object(f.c)((t=i,function(e){return Object.values(e.cell.byId).filter((function(e){return e.islandId===t}))})),u=Object(f.c)($(e)),s=Object(f.c)(q(e)),d=function(e){return Object.values(e.neighbours).filter((function(e){return u.includes(e)}))},b=o.filter((function(e){var t=e.id,n=e.cellType;return u.includes(t)&&n===F})).length>0;o.filter((function(e){var t=e.id,n=e.cellType,c=Object(se.a)(e,de);return!(!u.includes(t)||n!==C)&&4===d(c).length})).length;if(b?b&&c.push("\u2714 settlement"):c.push("need settlement (".concat(F,")")),l>2){var j=o.filter((function(e){var t=e.id,n=e.cellType;return u.includes(t)&&n===F}));j.length>0&&j.filter((function(e){return d(e).length>1})).length===j.length?c.push("\u2714 two neighbours per settlement"):j.length>0&&c.push("settlements need two neighbours")}if(l>=8){var O=o.filter((function(e){var t=e.id,n=e.cellType;return u.includes(t)&&n===A})).length>0;O?c.push("\ufe0f\u2714 mountain"):c.push("need one mountain (".concat(A,")"))}o.forEach((function(e){var t=e.id,n=e.contains;u.includes(t)&&n&&n.length>0&&n.forEach((function(e){return a[e]=a[e]?a[e]+1:1}))}));var p=o.filter((function(e){var t=e.id;return s.includes(t)})).length;p>0&&n.push("".concat(p," fishing harbour").concat(p>1?"s":""));for(var v=0,g=Object.entries(a);v<g.length;v++){var y=Object(h.a)(g[v],2),I=y[0],B=y[1];n.push("".concat(I," ").concat(B>1?"x".concat(B):""))}return{messages:c,notes:n}}var fe=n(74),je={segmentGroup:{position:"relative",top:"5vh",marginLeft:"10vw",marginRight:"10vw",backgroundColor:"white",width:"360px"}};function he(e){var t=e.islandId,n=be(t),c=n.messages,a=n.notes,r=Object(f.c)(X(t)),i=Object(ce.jsx)(oe.a.Group,{size:fe.isMobile?"small":"large",children:c.map((function(e){return Object(u.createElement)(oe.a,Object(j.a)(Object(j.a)({},e.includes("need ")?{color:"violet"}:{color:"green"}),{},{key:e}),e)}))}),l=Object(ce.jsx)(oe.a.Group,{size:fe.isMobile?"tiny":"small",children:a.map((function(e){return Object(u.createElement)(oe.a,Object(j.a)(Object(j.a)({},e.includes("fishing")?{color:"teal"}:{}),{},{key:e}),e)}))});return Object(ce.jsxs)(ue.a.Group,{raised:!0,className:"messages",style:je.segmentGroup,children:[Object(ce.jsx)(ue.a,{basic:!0,attached:!0,children:i}),Object(ce.jsxs)(ue.a,{basic:!0,attached:!0,children:[l,0===r?Object(ce.jsx)("strong",{children:"island complete!"}):Object(ce.jsxs)(ce.Fragment,{children:[Object(ce.jsx)("strong",{children:r})," tiles remaining"]})]})]})}n(120);var Oe={container:{paddingTop:"5vh",paddingBottom:"5vh",height:"100%",width:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"start"},notesContainer:{},islandGameContainer:{aspectRatio:"1/1"}};var pe=function(){var e="harvfn";return Object(ce.jsxs)("div",{style:Oe.container,children:[Object(ce.jsx)("div",{style:Oe.islandGameContainer,children:Object(ce.jsx)(le,{islandId:e})}),Object(ce.jsx)("div",{style:Oe.notesContainer,children:Object(ce.jsx)(he,{islandId:e})})]})},ve=Object(O.a)({reducer:{island:y,cell:ee}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(121);b.a.render(Object(ce.jsx)(s.a.StrictMode,{children:Object(ce.jsx)(f.a,{store:ve,children:Object(ce.jsx)(pe,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},21:function(e,t,n){e.exports={cell:"Cell_cell__2Yo1b",cellHarbour:"Cell_cellHarbour__2vnwc",cellBlocked:"Cell_cellBlocked__1bBYG",cellOcean:"Cell_cellOcean__1y8HT",cellActivated:"Cell_cellActivated__3UQme",cellUnactivated:"Cell_cellUnactivated__3sbS-",cellDim:"Cell_cellDim__2ue1M",cellUnactivatable:"Cell_cellUnactivatable__b31ur",cellSettlement:"Cell_cellSettlement__1tZKK",cellSpan:"Cell_cellSpan__3xKvP",noneActivated:"Cell_noneActivated__2DkU5"}}},[[122,1,2]]]);
//# sourceMappingURL=main.34039349.chunk.js.map